# 路线规划概览

## 阶段一：脚手架 → 基础 RAG 服务
- **梳理用例与范围**：覆盖客服、内部工程师以及手机 App 智能助手的核心需求，确定语料来源（产品手册、FAQ、工单历史、设备状态说明），明确检索/生成目标（回答说明书问题、提供安装步骤、给出 App 操作建议等），同时梳理不同渠道/角色的语气与输出要求。
- **数据与索引准备**：设计资料清洗流程（OCR、正则、结构化表），规划分块与元数据策略；选型向量库（可先用嵌入 API + 内嵌向量库，如 Milvus/PGVector/OpenSearch），搭建数据入库、失效重建与增量更新流程。
- **模型与管道集成**：配置 Spring AI RAG 模块，接入 DashScope/GPT 等模型，定义按 `channel`/`persona`/`capabilities` 定制的 Prompt 结构（系统指令、引用语料、回答约束）；实现检索 → 重写 → 生成的 RAG Pipeline（可用 Spring AI RetrievalAugmentedGeneration）。
- **服务化与接口**：设计 REST/gRPC API（如 `/api/rag/query`, `/feedback`, `/health`），支持渠道/角色参数、置信度返回和反馈闭环；加入鉴权、限流、日志与监控，并补充基础单测与集成测试（检索链路、生成质量、渠道语气回归）。
- **运营与评估**：建立黄金评估集与 KPI（忠实度、相关性、业务北极星指标），沉淀 persona 配置管理与运维文档，为阶段二的能力扩展打基础。

## 阶段二：RAG 服务 → 智能家居售后客服智能体
- **业务建模**：细化售后流程（报修、安装指导、保内外区分、远程诊断），梳理角色与状态机（用户/客服/工单系统），明确 App 智能助手的能力边界（设备控制、场景控制、耗材提醒、生活闲聊等）。
- **智能体框架**：选型多智能体或工作流编排（Spring AI Graph、State Machine、Rule Engine），设计意图识别、任务分解、工具调用（CRM、工单系统、库存查询、设备控制 API）等组件；支持能力开关与策略控制。
- **外部系统集成**：规划和模拟第三方/内部 API（设备管理、预约、物流、耗材平台），定义安全策略（OAuth、API Gateway、权限、审计），并处理不同渠道的认证与速率限制。
- **对话与记忆**：强化多轮对话上下文管理、用户画像和设备档案存储，建立记忆模块（长期偏好、设备历史、工单状态），支持跨渠道会话迁移。
- **监控与治理**：制定 Prompt 审计、质量评估（自动化评测 + 人工抽检），设置告警、A/B 测试策略，建立成本/延迟指标监控，准备灰度发布与回滚流程。
- **迭代与运营**：构建闭环反馈（客服人工兜底、用户满意度、App 行为数据），设计持续学习/知识库更新机制与工具调用策略优化，规划渠道化体验评估与运营看板。
